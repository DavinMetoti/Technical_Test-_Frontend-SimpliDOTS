"use strict";(self.webpackChunkdapp_movie=self.webpackChunkdapp_movie||[]).push([[298],{5298:(S,h,o)=>{o.r(h),o.d(h,{GenreModule:()=>M});var l=o(6814),a=o(11),t=o(4769),m=o(3859),f=o(2526),g=o(95),p=o(6022),d=o(7680);const v=function(s){return["/detail/movie",s]};function C(s,u){if(1&s){const e=t.EpF();t.TgZ(0,"div",6)(1,"a",7)(2,"div",8),t._UZ(3,"img",9),t.TgZ(4,"div",10)(5,"h5",11),t._uU(6),t.qZA()(),t.TgZ(7,"div",12)(8,"p-rating",13),t.NdJ("ngModelChange",function(i){const c=t.CHM(e).$implicit;return t.KtG(c.rate=i)}),t.qZA()()()()()}if(2&s){const e=u.$implicit,n=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(7,v,e.id)),t.xp6(2),t.Q6J("src",null!=e.poster_path?n.img+e.poster_path:"./assets/layout/images/no-poster.jpg",t.LSH)("alt",e.title),t.xp6(3),t.Oqu(e.title),t.xp6(2),t.Q6J("ngModel",e.rate)("readonly",!0)("cancel",!1)}}function y(s,u){1&s&&t._UZ(0,"p-progressSpinner",14)}let G=(()=>{class s{constructor(e,n,i){this.layoutService=e,this.api=n,this.route=i,this.movie=[],this.patch="",this.pages=1,this.loading=!1,this.title="",this.genres=[]}ngOnInit(){this.language=JSON.parse(localStorage.getItem("language")),this.route.params.subscribe(e=>{this.id=e.id,this.genreList(this.language),this.resetComponent()})}resetComponent(){this.movie=[],this.pages=1,this.loading=!1,this.loadMovie(this.pages,this.id),this.getConfiguration()}loadMovie(e,n){this.loading||(this.loading=!0,this.api.tmdbApigenre(e,n).subscribe(i=>{this.data=i;for(let r=0;r<i.results.length;r++)i.results[r].rate=i.results[r].vote_average/2;this.movie=this.movie.concat(i.results),this.pages=e,this.loading=!1}))}onScroll(e){const n=window.scrollY+window.innerHeight,i=document.documentElement.scrollHeight;this.pages<=this.data.total_pages&&n>=i-200&&!this.loading&&this.loadMovie(this.pages+1,this.id)}genreList(e){this.api.genreApi(e).subscribe(n=>{this.genres=n.genres;for(let i=0;i<this.genres.length;i++)if(this.genres[i].id==this.id){this.title=this.genres[i].name;break}})}getConfiguration(){this.api.config().subscribe(e=>{this.configuration=e,this.img=this.configuration.images.secure_base_url+"w342/"})}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(m.P),t.Y36(f.s),t.Y36(a.gz))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-genre"]],hostBindings:function(n,i){1&n&&t.NdJ("scroll",function(c){return i.onScroll(c)},!1,t.Jf7)},decls:10,vars:4,consts:[[1,"p-fluid"],[1,"col-12"],[1,"grid"],["class","col-6 lg:col-3",4,"ngFor","ngForOf"],[1,"justify-content-center","text-center"],["styleClass","w-4rem h-4rem ","strokeWidth","8","fill","var(--surface-ground)","animationDuration",".5s",4,"ngIf"],[1,"col-6","lg:col-3"],[3,"routerLink"],[1,"field"],["loading","lazy","width","100%",2,"border-radius","10px",3,"src","alt"],[1,"text-center"],[1,"title-movie"],[1,"mt-2","text-center"],["size","small",3,"ngModel","readonly","cancel","ngModelChange"],["styleClass","w-4rem h-4rem ","strokeWidth","8","fill","var(--surface-ground)","animationDuration",".5s"]],template:function(n,i){1&n&&(t.TgZ(0,"h2"),t._uU(1),t.qZA(),t.TgZ(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"div",0)(5,"div",1)(6,"div",2),t.YNc(7,C,9,9,"div",3),t.qZA()()(),t.TgZ(8,"div",4),t.YNc(9,y,1,0,"p-progressSpinner",5),t.qZA()),2&n&&(t.xp6(1),t.Oqu(i.title),t.xp6(2),t.Oqu("id"==i.language.iso_639_1?"GENRE":"GENRES"),t.xp6(4),t.Q6J("ngForOf",i.movie),t.xp6(2),t.Q6J("ngIf",i.loading))},dependencies:[l.sg,l.O5,a.rH,g.JJ,g.On,p.iG,d.G],encapsulation:2})}return s})(),Z=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.oAB({type:s});static#i=this.\u0275inj=t.cJS({imports:[a.Bz.forChild([{path:":id",component:G}]),a.Bz]})}return s})();var x=o(707),J=o(1913);let M=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.oAB({type:s});static#i=this.\u0275inj=t.cJS({imports:[l.ez,Z,g.u5,p.Xt,x.hJ,J.l,d.L]})}return s})()}}]);