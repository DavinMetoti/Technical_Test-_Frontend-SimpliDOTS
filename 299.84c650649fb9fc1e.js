"use strict";(self.webpackChunkdapp_movie=self.webpackChunkdapp_movie||[]).push([[299],{8299:(M,d,o)=>{o.r(d),o.d(d,{SearchModule:()=>T});var l=o(6814),a=o(11),t=o(4769),m=o(3859),f=o(2526),c=o(95),p=o(6022),u=o(7680);const v=function(e){return["/detail/movie",e]};function y(e,g){if(1&e){const i=t.EpF();t.TgZ(0,"div",7)(1,"a",8)(2,"div",9),t._UZ(3,"img",10),t.TgZ(4,"div",11)(5,"h5",12),t._uU(6),t.qZA()(),t.TgZ(7,"div",13)(8,"p-rating",14),t.NdJ("ngModelChange",function(n){const h=t.CHM(i).$implicit;return t.KtG(h.rate=n)}),t.qZA()()()()()}if(2&e){const i=g.$implicit,s=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(7,v,i.id)),t.xp6(2),t.Q6J("src",null!=i.poster_path?s.img+i.poster_path:"./assets/layout/images/no-poster.jpg",t.LSH)("alt",i.title),t.xp6(3),t.Oqu(i.title),t.xp6(2),t.Q6J("ngModel",i.rate)("readonly",!0)("cancel",!1)}}function C(e,g){1&e&&(t.TgZ(0,"div",15),t._UZ(1,"img",16),t.TgZ(2,"h5"),t._uU(3,"Result not found"),t.qZA()())}function S(e,g){1&e&&t._UZ(0,"p-progressSpinner",17)}let Z=(()=>{class e{constructor(i,s,n){this.layoutService=i,this.api=s,this.route=n,this.movie=[],this.patch="",this.pages=1,this.loading=!1,this.title=""}ngOnInit(){this.language=JSON.parse(localStorage.getItem("language")),this.route.params.subscribe(i=>{this.keyword=i.keyword,this.title=i.keyword,this.resetComponent()})}resetComponent(){this.movie=[],this.pages=1,this.loading=!1,this.loadMovie(this.keyword,this.pages),this.getConfiguration()}loadMovie(i,s){this.loading||(this.loading=!0,this.api.searchApi(i,s).subscribe(n=>{this.data=n;for(let r=0;r<n.results.length;r++)n.results[r].rate=n.results[r].vote_average/2;this.movie=this.movie.concat(n.results),this.pages=s,this.loading=!1}))}onScroll(i){const s=window.scrollY+window.innerHeight,n=document.documentElement.scrollHeight;this.pages<=this.data.total_pages&&s>=n-200&&!this.loading&&this.loadMovie(this.keyword,this.pages+1)}getConfiguration(){this.api.config().subscribe(i=>{this.configuration=i,this.img=this.configuration.images.secure_base_url+"w342/"})}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(m.P),t.Y36(f.s),t.Y36(a.gz))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-search"]],hostBindings:function(s,n){1&s&&t.NdJ("scroll",function(h){return n.onScroll(h)},!1,t.Jf7)},decls:11,vars:6,consts:[[1,"p-fluid"],[1,"col-12"],[1,"grid"],["class","col-6 lg:col-3",4,"ngFor","ngForOf"],["class","text-center justify-content-center",4,"ngIf"],[1,"justify-content-center","text-center"],["styleClass","w-4rem h-4rem ","strokeWidth","8","fill","var(--surface-ground)","animationDuration",".5s",4,"ngIf"],[1,"col-6","lg:col-3"],[3,"routerLink"],[1,"field"],["loading","lazy","width","100%",2,"border-radius","10px",3,"src","alt"],[1,"text-center"],[1,"title-movie"],[1,"mt-2","text-center"],["size","small",3,"ngModel","readonly","cancel","ngModelChange"],[1,"text-center","justify-content-center"],["src","./assets/layout/images/no-added.svg","width","30%","alt","No Add"],["styleClass","w-4rem h-4rem ","strokeWidth","8","fill","var(--surface-ground)","animationDuration",".5s"]],template:function(s,n){1&s&&(t.TgZ(0,"h2"),t._uU(1),t.qZA(),t.TgZ(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"div",0)(5,"div",1)(6,"div",2),t.YNc(7,y,9,9,"div",3),t.qZA()()(),t.YNc(8,C,4,0,"div",4),t.TgZ(9,"div",5),t.YNc(10,S,1,0,"p-progressSpinner",6),t.qZA()),2&s&&(t.xp6(1),t.AsE("","id"==n.language.iso_639_1?"HASIL":"RESULT"," ",n.title,""),t.xp6(2),t.Oqu("id"==n.language.iso_639_1?"PENCARIAN":"SEARCH"),t.xp6(4),t.Q6J("ngForOf",n.movie),t.xp6(1),t.Q6J("ngIf",0==n.movie.length),t.xp6(2),t.Q6J("ngIf",n.loading))},dependencies:[l.sg,l.O5,a.rH,c.JJ,c.On,p.iG,u.G],encapsulation:2})}return e})(),x=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[a.Bz.forChild([{path:":keyword",component:Z}]),a.Bz]})}return e})();var A=o(707),J=o(1913);let T=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[l.ez,x,c.u5,p.Xt,A.hJ,J.l,u.L]})}return e})()}}]);